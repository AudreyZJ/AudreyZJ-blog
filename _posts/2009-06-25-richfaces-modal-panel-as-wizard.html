---
layout: post
title: Richfaces - Modal Panel As A Wizard
date: '2009-06-25T10:58:00.000-07:00'
author: Babji Prashanth, Chetty
categories:
- java
- web
tags:
- JSF
- ajax4jsf
- Modal Panel As A Wizard
- javaee
- JSF include a page
- a4j include
- reset first page
- facelets
- Jboss Richfaces
modified_time: '2010-02-04T12:46:10.419-08:00'
blogger_id: tag:blogger.com,1999:blog-290045043624227719.post-1934036079679289497
blogger_orig_url: http://java-bytes.blogspot.com/2009/06/richfaces-modal-panel-as-wizard.html
---

Richfaces 'Modal Panel' component can be used to create a 'Dialog Box' or a 'Wizard' (or Wizard like behaviour), which is useful, when some part of the website/application has to ask for the input from the user, in steps. It can be customized, as per the requirements of that particular application, although everything that you implement doesn't sound like a standard mechanism, from the 'Richfaces' AJAX framework. Below is an example of creating a 'Wizard' out of a 'Richfaces Modal Panel' component:<br /><br />1) Lets suppose that this 'Wizard' is opened, when a user clicks on some link (or any other AJAX/Javascript event)...and 2 steps, for that Wizard. So, the modal panel is on one page and there would be 2 other pages that are to be included, in the modal panel, to get that 'Wizard' like behavior. In my case, I'm using JSF and Facelets (Xhtml files). Below is a code snippet for the main page (where the modal panel is included):<br /><br /><pre style="font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; color: #000000; background-color: #eee;font-size: 12px;border: 1px dashed #999999;line-height: 14px;padding: 5px; overflow: auto; width: 100%"><code>&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;<br />      xmlns:h=&quot;http://java.sun.com/jsf/html&quot;<br />      xmlns:f=&quot;http://java.sun.com/jsf/core&quot;<br />      xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;<br />      xmlns:rich=&quot;http://richfaces.org/rich&quot;<br />      xmlns:a4j=&quot;http://richfaces.org/a4j&quot;&gt;<br /><br />  &lt;ui:composition&gt;<br />    ...........<br />    ...........<br />    ............<br />  <br />    &lt;rich:modalPanel id=&quot;panel1&quot;&gt;<br />      &lt;f:facet name=&quot;header&quot;&gt;<br />              &lt;h:outputText value=&quot;Test&quot; /&gt;<br />          &lt;/f:facet&gt;<br />  <br />          &lt;f:facet name=&quot;controls&quot;&gt;<br />              &lt;h:commandLink value=&quot;Close&quot;<br />              style=&quot;cursor:pointer&quot; <br />              onclick=&quot;Richfaces.hideModalPanel('panel1')&quot; /&gt;<br />          &lt;/f:facet&gt;<br />          <br />          &lt;a4j:include binding=&quot;#{someBean.include}&quot; viewId=&quot;/view/include1.xhtml&quot;/&gt;<br />    &lt;/rich:modalPanel&gt;<br />  &lt;/ui:composition&gt;<br />&lt;/html&gt;<br /></code></pre><br /><br />2) And below is the code snippet, for the first included page, on the modal panel:<br /><br /><pre style="font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; color: #000000; background-color: #eee;font-size: 12px;border: 1px dashed #999999;line-height: 14px;padding: 5px; overflow: auto; width: 100%"><code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br />&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;<br />      xmlns:h=&quot;http://java.sun.com/jsf/html&quot;<br />      xmlns:f=&quot;http://java.sun.com/jsf/core&quot;<br />      xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;<br />      xmlns:rich=&quot;http://richfaces.org/rich&quot;<br />      xmlns:a4j=&quot;http://richfaces.org/a4j&quot;&gt;<br /><br />  &lt;ui:composition&gt;<br />    ...........<br />    ...........<br />    ............<br />  <br />    &lt;h:form&gt;<br />      &lt;h:panelGrid columns=&quot;2&quot;&gt;<br />        &lt;h:outputText value=&quot;#{msg.input}&quot;<br />        &lt;h:inputText value=&quot;#{someBean.someText}&quot;/&gt;<br />        <br />        &lt;rich:spacer width=&quot;20&quot;/&gt;<br />        &lt;a4j:commandButton value=&quot;#{msg.submit}&quot; action=&quot;include2&quot; reRender=&quot;wizard&quot;/&gt;<br />    &lt;/h:panelGrid&gt;      <br />   &lt;/h:form&gt;<br />  &lt;/ui:composition&gt;<br />&lt;/html&gt;<br /></code></pre><br /><br />Note that the above included page, doesn't need to have f:view tags. Also, there are a couple of important points to consider from the Richfaces documentation:<br /><br /><blockquote>RichFaces allows to organize a page flow inside the <a4j:include> component. This is a typical scenario for Wizard like behavior. The new content is rendered inside the <a4j:include> area. The content is taken from the navigation rule of the faces configuration file (usually, the faces-config.xml). Note, that the content of the "wizard" is not isolated from the rest of the page. The included page should not have own <f:view> (it does not matter if you use facelets). You need to have an Ajax component inside the <a4j:include> to navigate between the wizard pages. Otherwize, the whole page update will be performed.<br /><br />If you want to involve the server side validators and navigate to the next page only if the Validation phase is passed successfully, you can replace <h:commandButton> with <a4j:commandButton> and point to the action method that navigates to the next page. If Validation process fails, the partial page update will occur and you will see an error message. Otherwize, the application proceeds to the next page. Make sure, you define <redirect/> option for the navigation rule to avoid memory leaks.</blockquote><br /><br />3) And below is the "include2.xhtml", which is shown as a second step, for that wizard. This wizard appears only if the validation succeeds on the previously included page (in case, if you have any input validations).<br /><br /><pre style="font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; color: #000000; background-color: #eee;font-size: 12px;border: 1px dashed #999999;line-height: 14px;padding: 5px; overflow: auto; width: 100%"><code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;<br />&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;<br />      xmlns:h=&quot;http://java.sun.com/jsf/html&quot;<br />      xmlns:f=&quot;http://java.sun.com/jsf/core&quot;<br />      xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;<br />      xmlns:rich=&quot;http://richfaces.org/rich&quot;<br />      xmlns:a4j=&quot;http://richfaces.org/a4j&quot;&gt;<br /><br />  &lt;ui:composition&gt;<br />    ...........<br />    ...........<br />    ............<br />  <br />    &lt;h:form&gt;        <br />       &lt;a4j:commandButton value=&quot;#{msg.confirm}&quot; action=&quot;#{someBean.doSomeBusinessShit}&quot; reRender=&quot;someId,wizard&quot;/&gt;<br />       &lt;a4j:commandButton value=&quot;#{msg.cancel}&quot; action=&quot;#{someBean.reset}&quot; onclick=&quot;javascript:Richfaces.hideModalPanel('panel1')&quot; reRender=&quot;wizard&quot;/&gt;            <br />    &lt;/h:form&gt;<br />  &lt;/ui:composition&gt;<br />&lt;/html&gt;<br /></code></pre><br /><br />4) And the faces-config.xml configuration, is as follows:<br /><br /><pre style="font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; color: #000000; background-color: #eee;font-size: 12px;border: 1px dashed #999999;line-height: 14px;padding: 5px; overflow: auto; width: 100%"><code>&lt;?xml version=&quot;1.0&quot;?&gt;<br />&lt;!DOCTYPE faces-config PUBLIC &quot;-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.1//EN&quot;<br />                              &quot;http://java.sun.com/dtd/web-facesconfig_1_1.dtd&quot;&gt;<br />&lt;faces-config&gt;<br />   ............<br />   ............<br />   ............<br />   <br />   &lt;navigation-rule&gt;<br />        &lt;from-view-id&gt;/view/include1.xhtml&lt;/from-view-id&gt;<br />        &lt;navigation-case&gt;<br />                &lt;from-outcome&gt;include2&lt;/from-outcome&gt;<br />                &lt;to-view-id&gt;/view/include2.xhtml&lt;/to-view-id&gt;<br />        &lt;/navigation-case&gt;<br />    &lt;/navigation-rule&gt;   <br />&lt;/faces-config&gt;<br /><br /></code></pre><br /><br />...And hey, its not yet over. If you happened to implement the above stuff and if you navigated to the second step, clicked 'Cancel' and tried to open the 'Wizard' again, the second included page, opens up directly, without the first step (included page). To remedy this, I've to reset the "viewId" in the "a4j:include" component. The "a4j:include" tag, already includes a binding. The only thing that has to be done is to implement the "reset" method, as below:<br /><br /><pre style="font-family: Andale Mono, Lucida Console, Monaco, fixed, monospace; color: #000000; background-color: #eee;font-size: 12px;border: 1px dashed #999999;line-height: 14px;padding: 5px; overflow: auto; width: 100%"><code>package echo;<br /><br />import org.ajax4jsf.component.html.Include;<br /><br />public class SomeBean {<br />  .........<br />  .........<br />  private Include include;<br />  <br />  .......<br />  .......<br />  .......<br />  <br />  public void reset() {<br />    include.setViewId(&quot;/view/include1.xhtml&quot;);    <br />  }<br />}<br /></code></pre>